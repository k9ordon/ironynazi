<head>
    <title>ironynazi</title>
    <meta name="viewport" content="user-scalable=no, width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
</head>

<body>
    {{> layout}}
</body>

<template name="layout">
    <div class="layout">
        {{> header}}
        {{> createForm}}
        {{> uploadedList}}
        {{> ironyList}}
    </div>
</template>

<template name="header">
    <div class="header">
        <h1 class="header__logo">Ironynazi</h1>
        <p class="header__subline">We irony</p>
    </div>
</template>

<template name="createForm">
    <form class="createForm" name="create">
        <div class="createForm__wrapper">
            <input name="file" type="file" id="file" class="createForm__fileInput" size="50" accept="iamge/*">
            <label for="file" class="createForm__fileLabel">1. Choose an image</label>
        </div>

        <div class="createForm__wrapper">
            <input type="text" class="createForm__textInput" placeholder="2. TYPE SOME WORDS">
        </div>
        <div class="createForm__wrapper">
            <button type="submit" class="createForm__submitButton">3. Feel the irony</button>
        </div>
    </form>
</template>

<template name="uploadedList">
    <div class="uploadedList">
        {{#each items}}
            {{> uploadedListItem}}
        {{/each}}
    </div>
</template>
<template name="uploadedListItem">
    {{#if uploading}}
        <div class="uploadedListItem">
            uploading ... {{percent_uploaded}}
        </div>
    {{else}}
        {{#unless response.url}}
            <div class="uploadedListItem">
                processing ...
            </div>
        {{/unless}}
    {{/if}}
</template>

<template name="ironyList">
    <div class="ironyList">
        <h2 class="ironyList__header">Latest</h2>
        {{#each latest}}
            {{> ironyListItem}}
        {{/each}}
    </div>
</template>
<template name="ironyListItem">
        <div class="ironyListItem">
            <h3 class="ironyListItem__title">{{text}}</h3>
            {{#if cloudinary.url}}
                <img class="ironyListItem__img" src="{{ cloudinary.url }}" />
                <pre class="ironyListItem__link">{{ cloudinary.url }}</pre>
            {{else}}
                <div class="ironyListItem__upload">
                    loading ...
                </div>
            {{/if}}
        </div>
</template>
